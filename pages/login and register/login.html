<!DOCTYPE HTML>
<html lang="en">

<head>
  <title>Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta charset="UTF-8">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
  integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="../../assets/css/login and register/login.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
    integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
</head>

<body class="body">

  <div class="login-page">

    <div class="form">
      <p class="text-center" id="login_form">Login Form</p>

      <form id="form">

        <input type="email" id="email" placeholder="&#xf007;  email">
        <input type="password" id="password" placeholder="&#xf023;  password">
        <i style="color:#17a589 ;" id="password_eye" class="fas fa-eye-slash"></i>
        <br>
        <br>
        <a href="register.html">
 <button>LOGIN</button>
</a>

      </form>

      <a href="register.html" id="account_creation">
<button>Create an account</button> 
</a>

    </div>
  </div>
  <script>    // Code for function eye------

    const password_eye = document.getElementById("password_eye")

    const password = document.getElementById("password")

    password_eye.addEventListener("click", e => {

      const type = password.getAttribute("type") === "password" ? "text" : "password";

      password.setAttribute("type", type);

      const password_slash = password_eye.getAttribute("class") === "fas fa-eye-slash" ? "fas fa-eye" : "fas fa-eye-slash";

      password_eye.setAttribute("class", password_slash)

    })

    // //  Function for checking the user login which got from the user_registration page

    function login() {

      const email = document.getElementById("email").value

      const password = document.getElementById("password").value

      const arr = JSON.parse(localStorage.getItem("array"))

      let res;

      let user_id;

      arr.find(element => {

    if ((element.email == email) && (element.password == password)) {

     user_id=element.user_id;
     res = 1;

      return true;
    }
    
      return false;
    
  });

      if (res == 1) {

        const login_email = email;

        const user_obj =[

    {
      login_email,
      user_id
    }

    ]

        console.log(user_obj)

        localStorage.setItem("login_status", JSON.stringify(user_obj));

        alert("Logged in")
        window.location.href = "../profile/profile_detail.html"
      }

      else {
        alert("email id and password are not matched")
      }
    }

    // just getting the form selection

    const form = document.getElementById("form");

    form.addEventListener("submit", e => {
      e.preventDefault();
      login()
    })
  </script>
</body>

</html>